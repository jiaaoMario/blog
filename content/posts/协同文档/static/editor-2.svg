<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="531px" height="901px" viewBox="-0.5 -0.5 531 901" content="&lt;mxfile&gt;&lt;diagram id=&quot;iMPivZ2PJH8-70VkP3z5&quot; name=&quot;第 1 页&quot;&gt;zVnbbuM2EP0aAu2b7iIfRVvuFmi7xabFoo+KxbXVyqYhy3G2X9+ZESnLpjbOoo6cl4QaDSlezpw5Q7Nwtnn+qSl26191qWoWeOUzC+csCNIghb9o+NoZ4jDqDKumKjuTfzI8VP8qY/SM9VCVan/m2Gpdt9Xu3LjU261atme2omn08dzti67Pv7orVsoxPCyL2rV+rsp23Vm5XRbaP6hqtbZf9hPRvdkU1tmsZL8uSn0cmMKchbNG67ZrbZ5nqsa9s/vS9Vt8420/sUZt29d0iLsOT0V9MGsz82q/2sWqEtZuHrd6C//kut3U8ORDs3NHn2/OwJj2+tAsjZf5Sls0K2W8wn71gBqlN6ptvoJLo+qirZ7ORy/M+a16v9MSoWFWOb7iwF1xnjIRsYyzPGGcM5lSY8a4YHnEJGdcDiyCnHN3n+oa8Ifbc1xXrXrYFbTaI0TA2JY9qaZVzy9vmrsdpkPoGfyYALJwOp7Q6FvbeoBE7v3/DUzvA5nQhUwyEWTCEcjETC5Y1uFiTpCxuECLZFli0JRl1FgwERCaJJMw76SGNcjHBlorbLGc44CCGpmPWMNPpCyLqdeciZmzzY0+bEuFk/Tugjr/tbBLbgA7cR/YJS7s+ESwS5wV/7zdHdoPxbasVUOoygkfKcIu8539uIKIc/i8CStNiA/fvw9AuAsQ3xvfppsjhI8QU8Iyj0lhiAn56IXs1nMW+YiF8REesg9yFvUCVpIRNUIc0/KRBrX17iDHp4TcndSTlcFnmIsmwpz9+GDRc72kbAVpKxhPZBdQGk9/HuPhCa2XGwlKeYdN2JuirlWtV02xga471VSwCCDEi3e/n15cy41fqmdly4w3ypVhOiUwXcXysIapzyWdE5xBRllDkrJNmZwxkdAZ5Ez46CMEMYbAkJf5INcs0BkOdeQIY6QdmYwjAEhGWsIRna4GnzmNnLEsujIyyCluVReihHhMhkR3QEoeNmRMy7HjINrg7dzOJ8ev85QYDCYGltiN1l7DW7gta30oryNo3zb6HzXTtW5opHA2y+PF4jZYiq/Lrj7VDqHkx7fA0p30vh+NkNxUit+/k9ocXfRUetN+fIQ1As8qAwpviDce//X3fixWHVV6CsgYhUUXmRCWWax3NBgG8m+6VBSxM4rPmEjBP2WV79QZb0Dg0ZQEHtxJzPoj5U4wlZr13YJnkLUAMSghYkRDxj8SdDCpkFRFPRoPlG6EGQ5wiO4544nRIDIY6xVjrhKU5KC7dG927sn9lzCMJ9URYwVGdyM2H4Tz9VJhcI/Ws4Gj+EZGFnhrkgl7/p5zNDZNl3p52NCWXsvUj10J8svjJMcXJRcskrzy+G5xUzd2cTUFiwQj9Un36Snud9365OMfJhsJqn1BNnZhD6qTR4Q/z3AENvIBRgWmOpEZCcnT436A5A72fp/D7ACR8clIZIPahrzZqW0Qne+ZW5LXgvMmKe5ePz0EI+Ccqni2H79yY+MSaoo6SBLoIFNdlDkcirW0r7Y+KeA3uh4EDEoaXyyQj09lXYxw513ClOiGwbCgOcSYOUUXFRlh2eXygaCjuqza7gGGvX2uaii7+8c/d2WBjylSOF46Ub32/Zpu0lBIJw0FV3i/WJVTNW2OvrusGybehNTNC9X0pfOnYrtSP5gfJ7J4wIOdHhemgZcGEc0qMxAFzJx6AQv6KNtt48d3fcD8DQ8YHk+/4NK7wc/gYf4f&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 310 80 L 310 93.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 98.88 L 306.5 91.88 L 310 93.63 L 313.5 91.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="310" cy="40" rx="60" ry="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">用户按下按键</div></div></div></foreignObject><text x="310" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">用户按下按键</text></switch></g><path d="M 310 160 L 310 173.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 178.88 L 306.5 171.88 L 310 173.63 L 313.5 171.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="100" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 130px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">快捷键拦截插件<br />进行工作</div></div></div></foreignObject><text x="310" y="134" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">快捷键拦截插件
进行工作</text></switch></g><path d="M 310 240 L 310 253.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 258.88 L 306.5 251.88 L 310 253.63 L 313.5 251.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="180" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 210px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">InputHandler接管</div></div></div></foreignObject><text x="310" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">InputHandler接管</text></switch></g><path d="M 310 320 L 310 343.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 348.88 L 306.5 341.88 L 310 343.63 L 313.5 341.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="260" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 290px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">根据用户按键生成变更操作ops</div></div></div></foreignObject><text x="310" y="294" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">根据用户按键生成变更操作ops</text></switch></g><path d="M 310 410 L 310 443.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 448.88 L 306.5 441.88 L 310 443.63 L 313.5 441.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 250 410 L 270 350 L 370 350 L 350 410 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 380px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Doc层进行变更<br />调用</div></div></div></foreignObject><text x="310" y="384" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Doc层进行变更...</text></switch></g><path d="M 50 137.5 C 10 137.5 0 175 32 182.5 C 0 199 36 235 62 220 C 80 250 140 250 160 220 C 200 220 200 190 175 175 C 200 145 160 115 125 130 C 100 107.5 60 107.5 50 137.5 Z" fill="rgb(255, 255, 255)" stroke="#cce5ff" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 175px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">ShareDB建立编辑器链接，<br />并进行容错保护，<br />如心跳检测，断连重试</div></div></div></foreignObject><text x="100" y="179" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ShareDB建立编辑器链接，...</text></switch></g><path d="M 310 510 L 310 543.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 548.88 L 306.5 541.88 L 310 543.63 L 313.5 541.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 370 480 L 403.63 480" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 408.88 480 L 401.88 483.5 L 403.63 480 L 401.88 476.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="450" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 480px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">ShareDB 或者Yjs<br />接管，同步op至Node服务层</div></div></div></foreignObject><text x="310" y="484" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ShareDB 或者Yjs...</text></switch></g><path d="M 310 610 L 310 633.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 638.88 L 306.5 631.88 L 310 633.63 L 313.5 631.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="550" width="120" height="60" fill="rgb(255, 255, 255)" stroke="#cce5ff" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 580px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">ShareDB存储Op记录用于历史记录回放</div></div></div></foreignObject><text x="310" y="584" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ShareDB存储Op记录用于历史记录回放</text></switch></g><path d="M 410 440 L 530 440 L 530 508 Q 500 486.4 470 508 Q 440 529.6 410 508 L 410 452 Z" fill="rgb(255, 255, 255)" stroke="#cce5ff" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 468px; margin-left: 411px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">不同变更操作下，调用不同钩子</div></div></div></foreignObject><text x="470" y="472" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">不同变更操作下，调用不同钩子</text></switch></g><path d="M 310 700 L 310 733.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 738.88 L 306.5 731.88 L 310 733.63 L 313.5 731.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="640" width="120" height="60" fill="rgb(255, 255, 255)" stroke="#cce5ff" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 670px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">OT算法处理后，通过ws下发至各个终端</div></div></div></foreignObject><text x="310" y="674" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">OT算法处理后，通过ws下发至各个终端</text></switch></g><path d="M 310 800 L 310 833.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 838.88 L 306.5 831.88 L 310 833.63 L 313.5 831.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="250" y="740" width="120" height="60" fill="rgb(255, 255, 255)" stroke="#cce5ff" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 770px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">根据变更类型，执行Render渲染器内相对应的操作，如insert，Delete，Update等。</div></div></div></foreignObject><text x="310" y="774" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">根据变更类型，执行Render渲染器内相对应的操作，如insert，Delete，Up...</text></switch></g><rect x="250" y="840" width="120" height="60" fill="rgb(255, 255, 255)" stroke="#cce5ff" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 870px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">编辑器完成更新，<br />更新Range(以后有机会可以聊聊)</div></div></div></foreignObject><text x="310" y="874" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">编辑器完成更新，
更新Range(以后有机会可以聊聊)</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>